<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Maranova Auth Callback</title>
    <script>
      (function () {
        const params = new URLSearchParams(window.location.search)
        const code = params.get('code')
        const provider = params.get('provider')
        const state = params.get('state')

        const channel = new BroadcastChannel('maranova:auth')
        if (code && provider) {
          channel.postMessage({ type: 'auth:callback', code, provider, state })
        }
        setTimeout(() => window.close(), 300)
      })()
    </script>
  </head>
  <body></body>
</html>
